{"0":"g","1":"k","2":"p","3":"1","4":"g","5":"o","theme":null,"config":{"padding":{"type":[{"name":"Number","level":3},{"name":"Percent","level":3}],"default":10,"value":"10"},"margin":{"type":[{"name":"Number","level":3},{"name":"Percent","level":3}],"default":10,"value":"10"},"radius":{"type":[{"name":"Number","level":3}],"default":5,"value":"2"},"palette":{"type":[{"name":"Palette","level":5,"re":{},"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"plotdb":{"colors":[{"hex":"#ed1d78"},{"hex":"#c59b6d"},{"hex":"#8cc63f"},{"hex":"#28aae2"}]}}],"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"value":{"colors":[{"hex":"#3a66cb"},{"hex":"#0ebeba"},{"hex":"#fee476"},{"hex":"#feae01"},{"hex":"#e62b0f"}]}},"fontSize":{"type":[{"name":"Number","level":3}],"default":12,"value":"10"},"direction":{"type":[{"name":"Choice","level":4,"values":["Vertical","Horizontal"]}],"default":"Vertical","value":"Vertical"},"showLabel":{"type":[{"name":"Boolean","level":2}],"default":true,"value":true},"showAxis":{"type":[{"name":"Boolean","level":2}],"default":true,"value":true},"axisSize":{"type":[{"name":"Number","level":3}],"default":10,"value":"40"}},"dimension":{"value":{"type":[{"name":"Number","level":3}],"require":true,"desc":"length of bar","fields":[{"name":"death number by zymotic","type":"Number","dataset":{"type":{"location":"sample","name":"dataset"},"key":"/dataset/sample/:crimeawar"},"data":[1,12,11,359,828,788,503,844,1725,2761,2120,1205,477,508,802,382,483,189,128,178,91,42,24,15]}],"fieldName":"death number by zymotic"},"name":{"type":[],"require":false,"desc":"???","fields":[{"name":"month","type":"Date","dataset":{"type":{"location":"sample","name":"dataset"},"key":"/dataset/sample/:crimeawar"},"data":["01/04/1854","01/05/1854","01/06/1854","01/07/1854","01/08/1854","01/09/1854","01/10/1854","01/11/1854","01/12/1854","01/01/1855","01/02/1855","01/03/1855","01/04/1855","01/05/1855","01/06/1855","01/07/1855","01/08/1855","01/09/1855","01/10/1855","01/11/1855","01/12/1855","01/01/1856","01/02/1856","01/03/1856"]}],"fieldName":"month"},"text":{"type":[],"require":false,"desc":"???","fields":[{"name":"month","type":"Date","dataset":{"type":{"location":"sample","name":"dataset"},"key":"/dataset/sample/:crimeawar"},"data":["01/04/1854","01/05/1854","01/06/1854","01/07/1854","01/08/1854","01/09/1854","01/10/1854","01/11/1854","01/12/1854","01/01/1855","01/02/1855","01/03/1855","01/04/1855","01/05/1855","01/06/1855","01/07/1855","01/08/1855","01/09/1855","01/10/1855","01/11/1855","01/12/1855","01/01/1856","01/02/1856","01/03/1856"]}],"fieldName":"month"}},"data":[{"value":1,"name":"01/04/1854","text":"01/04/1854"},{"value":12,"name":"01/05/1854","text":"01/05/1854"},{"value":11,"name":"01/06/1854","text":"01/06/1854"},{"value":359,"name":"01/07/1854","text":"01/07/1854"},{"value":828,"name":"01/08/1854","text":"01/08/1854"},{"value":788,"name":"01/09/1854","text":"01/09/1854"},{"value":503,"name":"01/10/1854","text":"01/10/1854"},{"value":844,"name":"01/11/1854","text":"01/11/1854"},{"value":1725,"name":"01/12/1854","text":"01/12/1854"},{"value":2761,"name":"01/01/1855","text":"01/01/1855"},{"value":2120,"name":"01/02/1855","text":"01/02/1855"},{"value":1205,"name":"01/03/1855","text":"01/03/1855"},{"value":477,"name":"01/04/1855","text":"01/04/1855"},{"value":508,"name":"01/05/1855","text":"01/05/1855"},{"value":802,"name":"01/06/1855","text":"01/06/1855"},{"value":382,"name":"01/07/1855","text":"01/07/1855"},{"value":483,"name":"01/08/1855","text":"01/08/1855"},{"value":189,"name":"01/09/1855","text":"01/09/1855"},{"value":128,"name":"01/10/1855","text":"01/10/1855"},{"value":178,"name":"01/11/1855","text":"01/11/1855"},{"value":91,"name":"01/12/1855","text":"01/12/1855"},{"value":42,"name":"01/01/1856","text":"01/01/1856"},{"value":24,"name":"01/02/1856","text":"01/02/1856"},{"value":15,"name":"01/03/1856","text":"01/03/1856"}],"type":{"location":"server","name":"chart"},"owner":"o3tgs6","key":"gkp1go","permission":{"switch":["public"],"value":[{"switch":"public","perm":"fork"}]},"name":"Bar Chart","desc":"a standard bar chart","tags":[""],"doc":{"name":"document","type":"html","content":"<h3>Death in Crimea War</h3>","lines":1,"size":28},"style":{"name":"stylesheet","type":"css","content":"h3 {\n  text-align: center;\n  font-family: Arial;\n}\n\nsvg > text:nth-of-type(3n), svg > text:nth-of-type(3n+1) {\n  baseline-shift: -15px;\n  display: none;\n}\n\n","lines":11,"size":156},"code":{"name":"code","type":"javascript","content":"var module = {};\nmodule.exports = plotdb.chart.create({\n  sample: [\n    { value: 1, text: 1, name: \"IE\"},\n    { value: 7, text: 7, name: \"Chrome\"},\n    { value: 5, text: 5, name: \"Firefox\"},\n    { value: 2, text: 2, name: \"Opera\"},\n    { value: 4, text: 4, name: \"Android\"},\n    { value: 2, text: 2, name: \"Safari\"},\n    { value: 1, text: 1, name: \"Puffin\"},\n  ],\n  dimension: {\n    value: { type: [plotdb.Number], require: true, desc: \"length of bar\"},\n    name:  { type: [], require: false, desc: \"???\"},\n    text:  { type: [], require: false, desc: \"???\"}\n  },\n  config: {\n    padding:   { type: [plotdb.Number, plotdb.Percent], default: 10 },\n    margin:    { type: [plotdb.Number, plotdb.Percent], default: 10 },\n    radius:    { type: [plotdb.Number], default: 5 },\n    palette:   { type: [plotdb.Palette], default: plotdb.Palette.default },\n    fontSize:  { type: [plotdb.Number], default: 12 },\n    direction: { type: [plotdb.Choice([\"Vertical\", \"Horizontal\"])], default: \"Vertical\" },\n    showLabel: { type: [plotdb.Boolean], default: true },\n    showAxis:  { type: [plotdb.Boolean], default: true },\n    axisSize:  { type: [plotdb.Number], default: 10 }\n  },\n\n  init: function() {\n    this.svg = d3.select(this.root).append(\"svg\").attr({\n      width: \"100%\", height: \"80%\",\n      viewBox: \"0 0 800 600\",\n      preserveAspectRatio: \"xMidYMid\"\n    });\n  },\n\n  bind: function() {\n    this.bar = this.svg.selectAll(\"rect.bar\").data(this.data);\n    this.bar.enter().append(\"rect\").attr({class: \"bar\"});\n    this.bar.exit().remove();\n    this.name = this.svg.selectAll(\"text.name\").data(this.data);\n    this.name.enter().append(\"text\").attr({class: \"name\"});\n    this.name.exit().remove();\n    this.label = this.svg.selectAll(\"text.label\").data(this.data);\n    this.label.enter().append(\"text\").attr({class: \"label\"});\n    this.label.exit().remove();\n    this.axisGroup = this.svg.append(\"g\");\n    this.axisLine = this.axisGroup.append(\"line\");\n  },\n\n  resize: function() {\n    var config = this.config;\n    var that = this;\n    var axis = (config.showAxis?config.axisSize:0);\n    this.color = d3.scale.ordinal().range(config.palette.colors.map(function(it) { return it.hex; }));\n    this.dir = (config.direction == \"Vertical\");\n    this.width = $(this.root).width();\n    this.height = $(this.root).height() - 100;\n    this.margin = config.margin;\n    this.size = (this.dir?[this.width, this.height]:[this.height, this.width]);\n\n    this.svg.attr({\n      width: this.width,\n      height: this.height,\n      \"viewBox\": [0, 0, this.width, this.height].join(\" \")\n    });\n\n    if(plotdb.Percent.test(config.padding)) {\n      this.padding = this.size[0] * (+config.padding.replace(/%/,\"\")/100);\n    } else {\n      this.padding = config.padding;\n    }\n    this.dim = [\n      [config.margin + (this.dir?axis:0), this.size[0] - config.margin - (this.dir?0:axis)],\n      [\n        [config.margin,\n         (this.dir && config.showLabel?config.fontSize:0),\n         (this.dir?0:config.fontSize * 5),\n        ].reduce(function(a,b) { return a + b; }, 0),\n        this.size[1] - config.margin - (this.dir || (!this.dir && config.showLabel)?config.fontSize:0)\n      ]\n    ];\n    this.values = this.data.map(function(it) { return it.value; });\n    this.len = [\n      (( this.dim[0][1] - this.dim[0][0] ) / this.data.length) - this.padding,\n      d3.scale.linear().domain([0, d3.max(this.values)]).range([0, this.dim[1][1] - this.dim[1][0]]),\n      d3.scale.linear().domain([0, d3.max(this.values)]).range([this.dim[1][1] - this.dim[1][0], 0])\n    ];\n    this.origin = [\n      function(d,i) { \n        return (\n          ( that.len[0] + that.padding ) * i + ( that.padding / 2) +\n          (that.dir?axis:0) + that.margin\n        );\n      },\n      (this.dir?(function(d,i) { return that.dim[1][1] - that.len[1](d.value); }):this.dim[1][0])\n    ];\n    this.axisFunc = d3.svg.axis().orient(this.dir?\"left\":\"bottom\")\n      .scale(this.dir?this.len[2]:this.len[1])\n      .tickPadding(10)\n      .tickSize(3,1);\n  },\n\n  render: function() {\n    var that = this;\n    var name = (this.dir?\"x y width height dx dy\":\"y x height width dy dx\").split(\" \");\n    var config = this.config;\n    this.bar.attr(name[0], this.origin[0]);\n    this.bar.attr(name[1], this.origin[1]);\n    this.bar.attr(name[2], this.len[0]);\n    this.bar.attr(name[3], function(it) { return that.len[1](it.value); });\n    this.bar.attr({\n      rx: config.radius,\n      ry: config.radius,\n      fill: function(d,i) { return that.color(i); },\n      stroke: \"none\"\n    });\n\n    this.name.attr(name[0], this.origin[0]);\n    this.name.attr(name[1], this.origin[1]);\n    this.name.attr(name[4], this.len[0] / 2);\n    this.name.attr(name[5], function(it) { \n      return (that.dir?that.len[1](it.value) + config.fontSize:-config.fontSize)\n    });\n\n    this.name.attr({\n      \"font-size\": config.fontSize,\n      \"text-anchor\": (this.dir?\"middle\":\"end\"),\n      \"dominant-baseline\": \"central\",\n    }).text(function(it) { return it.name; });\n\n    this.label.attr(name[0], this.origin[0]);\n    this.label.attr(name[1], this.origin[1]);\n    this.label.attr(name[4], this.len[0] / 2);\n    this.label.attr(name[5], function(it) { \n      return (that.dir?-config.fontSize:(that.len[1](it.value) + config.fontSize));\n    });\n\n    this.label.attr({\n      \"font-size\": config.fontSize,\n      \"text-anchor\": (this.dir?\"middle\":\"start\"),\n      \"dominant-baseline\": \"central\"\n    }).text(function(it) { return (config.showLabel?it.value:\"\"); });\n\n    this.axisGroup.attr({\n      \"transform\": function(it) {\n        if(that.dir) {\n          return [\"translate(\",that.dim[0][0],\",\",that.dim[1][0],\")\"].join(\"\");\n        } else {\n          return [\"translate(\",that.dim[1][0],\",\",that.dim[0][1],\")\"].join(\"\");\n        }\n      }\n    });\n    if(config.showAxis) {\n      this.axisGroup.style({\"display\": \"block\"});\n      this.axisGroup.call(this.axisFunc);\n      this.axisGroup.selectAll(\"text\").attr({\n        \"font-size\": config.fontSize\n      });\n      this.axisGroup.selectAll(\"line\").attr({\n        \"stroke\": \"#000\"\n      });\n    } else {\n      this.axisGroup.style({\"display\": \"none\"});\n    }\n  }\n});\n","lines":168,"size":6129},"assets":[],"isType":false,"createdTime":1455695768478,"modifiedTime":1458279512567,"ownerName":"Kirby Wu","likes":0,"parent":null,"basetype":"1","visualencoding":["1","3","6"],"category":["4","5"]}