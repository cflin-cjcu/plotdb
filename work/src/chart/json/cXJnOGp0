{"theme":null,"basetype":null,"visualencoding":null,"category":null,"data":[],"type":{"location":"server","name":"chart"},"owner":"o3tgs6","key":"qrg8jt","permission":{"switch":[],"value":[]},"name":"Bump Chart (draft)","desc":"a standard bump chart","tags":[],"doc":{"name":"document","type":"html","content":"","lines":1,"size":0},"style":{"name":"stylesheet","type":"css","content":"","lines":1,"size":0},"code":{"name":"code","type":"javascript","content":"var module = {};\nmodule.exports = plotdb.chart.create({\n  sample: d3.range(20).map(function(it) {\n    return {\n      value: d3.range(3).map(function(it) { return Math.random(); })\n    };\n  }),\n  dimension: {\n    value: { type: [plotdb.Number], multiple: true, require: true, desc: \"value\" },\n  },\n  config: {\n    fontSize: { name: \"Font Size\", type: [plotdb.Number], default: 12 },\n    margin: { name: \"Margin\", type: [plotdb.Number], default: 10 },\n    padding: { name: \"Padding\", type: [plotdb.Number], default: 10 },\n    palette: { name: \"Palette\", type: [plotdb.Palette], default: plotdb.Palette.default,\n      hint: plotdb.Palette.subtype.qualitative }\n  },\n  init: function() {\n    var that = this;\n    this.svg = d3.select(this.root).append(\"svg\");\n    this.names = (\n      this.dimension.value.fieldName || \n      (this.data[0]?d3.range(this.data[0].value.length || 1 ):[0])\n    );\n    this.parsed = [];\n    for(var j,i=0,ret=[];i<this.names.length;i++) {\n      for(j=0;j<this.data.length;j++) {\n        ret.push(this.data[j].value[i]);\n      }\n      this.parsed.push(ret);\n    }\n    this.valuerange = d3.extent(this.parsed.reduce(function(a,b) { return a.concat(b); }, []));\n    \n  },\n  bind: function() {\n    var that = this;\n    this.svg.selectAll(\"g.data-group\").data(this.parsed)\n    .enter().append(\"g\").attr({class: \"data-group\"})\n    .each(function(d,i) {\n      var node = d3.select(this);\n      node.append(\"path\").attr({class: \"data\"});\n    });\n  },\n  resize: function() {\n    var that = this;\n    var box = this.root.getBoundingClientRect();\n    var width = this.width = box.width;\n    var height = this.height = box.height - 10;\n    var m = this.config.margin;\n    this.xAxisHeight = this.config.fontSize * 3;\n    this.yAxisWidth = this.config.fontSize * 5;\n    this.svg.attr({\n      width: width + \"px\", height: height + \"px\",\n      viewBox: [0,0,width,height].join(\" \"),\n      preserveAspectRatio: \"xMidYMid\"\n    });\n    this.yscale = d3.scale.linear()\n      .domain([0,this.valuerange[1]])\n      .range([height - m - this.xAxisHeight, m]);\n    this.lines = d3.svg.line()\n      .x(function(d,i) { return i; })\n      .y(function(d,i) { return that.yscale(d); });\n  },\n  render: function() {\n    var that = this;\n    this.svg.selectAll(\"g.data-group\").attr({\n      d: that.lines\n    });\n  }\n});","lines":70,"size":2314},"config":{"fontSize":{"name":"Font Size","type":[{"name":"Number","level":3}],"default":12,"value":10},"margin":{"name":"Margin","type":[{"name":"Number","level":3}],"default":10,"value":10},"padding":{"name":"Padding","type":[{"name":"Number","level":3}],"default":10,"value":10},"palette":{"name":"Palette","type":[{"name":"Palette","level":5,"re":{},"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"plotdb":{"colors":[{"hex":"#ed1d78"},{"hex":"#c59b6d"},{"hex":"#8cc63f"},{"hex":"#28aae2"}]},"qualitative":{"colors":[{"hex":"#c05ae0"},{"hex":"#cf2d0c"},{"hex":"#e9ab1e"},{"hex":"#86ffb5"},{"hex":"#64dfff"},{"hex":"#003f7d"}]},"binary":{"colors":[{"hex":"#ff8356"},{"hex":"#0076a1"}]},"sequential":{"colors":[{"hex":"#950431"},{"hex":"#be043e"},{"hex":"#ec326d"},{"hex":"#fc82a9"},{"hex":"#febed2"},{"hex":"#fee6ee"}]},"diverging":{"colors":[{"hex":"#74001a"},{"hex":"#cd2149"},{"hex":"#f23971"},{"hex":"#ff84ab"},{"hex":"#ffc3d7"},{"hex":"#f2f2dd"},{"hex":"#b8d9ed"},{"hex":"#81b1d0"},{"hex":"#3d8bb7"},{"hex":"#0071a8"},{"hex":"#003558"}]},"subtype":{"qualitative":"qualitative","binary":"binary","sequential":"sequential","diverging":"diverging"}}],"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"hint":"qualitative","value":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]}}},"dimension":{"value":{"type":[{"name":"Number","level":3}],"multiple":true,"require":true,"desc":"value"}},"assets":[],"isType":false,"likes":0,"parent":null,"createdTime":1458986349397,"ownerName":"Kirby Wu","modifiedTime":1458986907830}