{"theme":"1fater3","data":[],"type":{"location":"server","name":"chart"},"owner":"o3tgs6","key":"ychzz1","permission":{"switch":["public"],"value":[{"switch":"public","perm":"fork"}]},"name":"Scatter Plot","desc":"a standard scatter plot","tags":[""],"doc":{"name":"document","type":"html","content":"<h2 style=\"text-align:center\">Scatter Plot</h2>","lines":1,"size":47},"style":{"name":"stylesheet","type":"css","content":".domain {\n  fill: none;\n  stroke: #000;\n  storke-width: 1px;\n}","lines":5,"size":62},"code":{"name":"code","type":"javascript","content":"var module = {};\nmodule.exports = plotdb.chart.create({\n  sample: d3.range(100).map(function(it) {\n    return {\n      x: Math.random(),\n      y: Math.random(),\n      radius: Math.random(),\n      category: Math.random()\n    };\n  }),\n  dimension: {\n    radius: { type: [plotdb.Number], require: true, desc: \"radius of circle\" },\n    x: { type: [plotdb.Number], require: true, desc: \"x axis of circle\"},\n    y: { type: [plotdb.Number], require: true, desc: \"y axis of circle\"},\n    category: { type: [], require: false, desc: \"category of circle\"}\n  },\n  config: {\n    padding: { name: \"Padding\", type: [plotdb.Number], default: 10 },\n    margin: { name: \"Margin\", type: [plotdb.Number], default: 10 },\n    fontSize: { name: \"Font Size\", type: [plotdb.Number], default: 12 },\n    palette: {\n      name: \"Palette\", type: [plotdb.Palette], default: plotdb.Palette['default'],\n      hint: plotdb.Palette.subtype.qualitative\n    }\n  },\n  init: function() {\n    var that = this;\n    this.svg = d3.select(this.root).append(\"svg\");\n    this.xAxisGroup = this.svg.append(\"g\").attr({class: \"axis horizontal\"});\n    this.yAxisGroup = this.svg.append(\"g\").attr({class: \"axis vertical\"});\n    this.gridGroup = this.svg.append(\"g\").attr({class: \"grid-group\"});\n    this.xrange = d3.extent(this.data.map(function(it) { return it.x; }));\n    this.yrange = d3.extent(this.data.map(function(it) { return it.y; }));\n    this.rrange = d3.extent(this.data.map(function(it) { return it.radius; }));\n  },\n  bind: function() {\n    var that = this;\n    this.svg.selectAll(\"circle.data\").data(this.data)\n    .enter().append(\"circle\").attr({class:\"data\"});\n    this.gridGroup.selectAll(\"line.grid.vertical\").data(this.xticks)\n    .enter().append(\"line\").attr({class: \"grid vertical\"});\n    this.gridGroup.selectAll(\"line.grid.horizontal\").data(this.yticks)\n    .enter().append(\"line\").attr({class: \"grid horizontal\"});\n  },\n  resize: function() {\n    var that = this;\n    var box = this.root.getBoundingClientRect();\n    var svgbox = d3.select(this.root).select(\"svg\")[0][0].getBoundingClientRect();\n    var width = this.width = box.width;\n    var height = this.height = box.height - 10 - svgbox.top;\n    var m = this.config.margin;\n    this.yAxisWidth = (\"\"+(parseInt(this.yrange[1]*10)/10)).length * this.config.fontSize;\n    this.xAxisHeight = 3 * this.config.fontSize;\n    this.svg.attr({\n      width: width + \"px\", height: height + \"px\",\n      viewBox: [0,0,width,height].join(\" \"),\n      preserveAspectRatio: \"xMidYMid\"\n    });\n    this.rscale = d3.scale.linear().domain(this.rrange).range([ 1, 10 ]);\n    var maxRadius = this.rscale(this.rrange[1]);\n    this.yscale = d3.scale.linear().domain(this.yrange).range([\n      height - this.xAxisHeight - maxRadius - m, maxRadius + m\n    ]);\n    this.xscale = d3.scale.linear().domain(this.xrange).range([\n      this.yAxisWidth + maxRadius + m, width - maxRadius - m\n    ]);\n    this.cscale = d3.scale.ordinal().range(this.config.palette.colors.map(function(it) { return it.hex; }));\n    this.xticks = this.xscale.ticks(5).map(function(it) { return parseInt(it*10)/10; });\n    this.yticks = this.yscale.ticks(5).map(function(it) { return parseInt(it*10)/10; });\n    this.xAxis = d3.svg.axis().scale(this.xscale).orient(\"bottom\")\n      .tickValues(this.xticks)\n      .tickPadding(this.config.axisTickPadding || 6)\n      .tickSize(this.config.axisTickInner || 0,this.config.axisTickOuter || 0);\n    this.yAxis = d3.svg.axis().scale(this.yscale).orient(\"left\")\n      .tickValues(this.yticks)\n      .tickPadding(this.config.axisTickPadding || 6)\n      .tickSize(this.config.axisTickInner || 0,this.config.axisTickOuter || 0);\n    this.xAxisGroup.call(this.xAxis);\n    this.yAxisGroup.call(this.yAxis);\n  },\n  render: function() {\n    var that = this;\n    var m = this.config.margin;\n    this.xAxisGroup.attr({\n      transform: [\"translate(\", 0, \",\", this.height - this.xAxisHeight - m,\")\"].join(\"\")\n    });\n    this.yAxisGroup.attr({\n      transform: [\"translate(\", this.yAxisWidth + m , \",\", 0 ,\")\"].join(\"\")\n    });\n    this.svg.selectAll(\"circle.data\").attr({\n      cx: function(it) { return that.xscale(it.x); },\n      cy: function(it) { return that.yscale(it.y); },\n      r: function(it) { return that.rscale(it.radius); },\n      fill: function(it) { return that.cscale(it.category); }\n    });\n    this.gridGroup.selectAll(\"line.grid.vertical\").attr({\n      x1: function(it) { return that.xscale(it); },\n      x2: function(it) { return that.xscale(it); },\n      y1: that.yscale(that.yrange[0]),\n      y2: that.yscale(that.yrange[1]),\n      stroke: \"#ccc\",\n      \"stroke-dasharray\": \"2 4\"\n    });\n    this.gridGroup.selectAll(\"line.grid.horizontal\").attr({\n      y1: function(it) { return that.yscale(it); },\n      y2: function(it) { return that.yscale(it); },\n      x1: that.xscale(that.xrange[0]),\n      x2: that.xscale(that.xrange[1]),\n      stroke: \"#ccc\",\n      \"stroke-dasharray\": \"2 4\"\n    });\n  }\n});","lines":113,"size":4929},"config":{"padding":{"name":"Padding","type":[{"name":"Number","level":3}],"default":10,"value":10},"margin":{"name":"Margin","type":[{"name":"Number","level":3}],"default":10,"value":"10"},"fontSize":{"name":"Font Size","type":[{"name":"Number","level":3}],"default":12,"value":20},"palette":{"name":"Palette","type":[{"name":"Palette","level":5,"re":{},"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"plotdb":{"colors":[{"hex":"#ed1d78"},{"hex":"#c59b6d"},{"hex":"#8cc63f"},{"hex":"#28aae2"}]},"qualitative":{"colors":[]},"binary":{"colors":[]},"sequential":{"colors":[]},"diverging":{"colors":[]},"subtype":{"qualitative":"qualitative","binary":"binary","sequential":"sequential","diverging":"diverging"}}],"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"hint":"qualitative","value":{"colors":[{"hex":"#7d2d21"},{"hex":"#DC5356"},{"hex":"#FFE670"},{"hex":"#dae275"},{"hex":"#4CC786"},{"hex":"#307D99"}],"name":"qualitative"}}},"dimension":{"radius":{"type":[{"name":"Number","level":3}],"require":true,"desc":"radius of circle"},"x":{"type":[{"name":"Number","level":3}],"require":true,"desc":"x axis of circle"},"y":{"type":[{"name":"Number","level":3}],"require":true,"desc":"y axis of circle"},"category":{"type":[],"require":false,"desc":"category of circle"}},"assets":[],"isType":false,"createdTime":1457424714268,"modifiedTime":1458279862067,"likes":0,"ownerName":"Kirby Wu","parent":null,"basetype":"18","visualencoding":["1","6"],"category":["1","4","5"]}