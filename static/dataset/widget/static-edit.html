<div ng-cloak="ng-cloak" ng-show="panel.toggled" ng-click="panel.toggle()" class="cover-modal ng-hide-animate ng-hide"></div><div ng-cloak="ng-cloak" ng-show="panel.toggled" class="cover-modal-inner ng-hide-animate ng-hide narrow"><div ng-init="panel.tab='publish'" class="panel panel-default"><div class="panel-heading">&nbsp;</div><div class="panel-body"><div ng-cloak="ng-cloak"><div ng-click="panel.toggle()" class="closebtn inner lg inverse"></div><ul class="nav nav-tabs"><li ng-class="{'active':panel.tab=='publish'}" ng-click="panel.tab='publish'"><a href="#"><i class="fa fa-bullhorn"></i> Publish</a></li><li ng-class="{'active':panel.tab=='permission'}" ng-click="panel.tab='permission'"><a href="#"><i class="fa fa-lock"></i> Permission</a></li></ul><div ng-show="panel.tab=='permission'" style="position:relative"><div ng-hide="isAdmin &amp;&amp; (user.data.payment.plan &gt; 1 || (plConfig.mode%2))" class="panel-lock"><div ng-show="!isAdmin">You don't have permission to change this</div><div ng-show="isAdmin"><div style="margin-top: -30px"><span>Upgrade to enable privacy control!</span><br/><br/><a href="/pricing/" target="_blank" class="btn btn-primary">let's check out the plans</a></div></div></div><div style="padding: 10px 0" class="perm-item"><label>Searchable?</label><br/><div class="btn-group"><div ng-class="{'active':dataset.searchable}" ng-click="dataset.searchable=true" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> On</span></div><div ng-class="{'active':!dataset.searchable}" ng-click="dataset.searchable=false" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Off</span></div></div><div ng-show="dataset.searchable" class="pull-right btn btn-text btn-sm"><b>shown</b> in search result</div><div ng-show="!dataset.searchable" class="pull-right btn btn-text btn-sm"><b>hidden</b> from search result</div></div><div class="sep"></div><div ng-controller="permEdit" ng-init="setPerm('dataset.permission')"><div class="perm-panel"><label>Add new permission</label><div class="input-group long"><div ng-controller="plSelectController" ng-init="init(permEdit.list,'entityChart',undefined)"><div plselect="plselect" ng-portal="portal" ng-cloak="ng-cloak" ng-type="entityChart" class="select-box"><div class="select-input form-control"><div ng-repeat="item in portal.data" class="select-option"><i ng-click="remove(item,$event)" class="fa fa-close"></i><span ng-if="item.type=='chart'"><div ng-attr-style="background-image:url(/s/chart/{{item.key}}.png)" class="avatar"></div><div class="name"><span>{{item.displayname}}</span></div></span><span ng-if="item.type!='chart'"><div ng-attr-style="background-image:url(/s/avatar/{{item.avatar || 0}}.jpg)" class="avatar"></div><div class="name">{{item.displayname}} <small class="grayed">(id:{{item.key}})</small></div></span></div><input/></div><div class="select-dropdown"><div>&nbsp;</div><div ng-repeat="opt in portal.options" ng-click="toggle(opt)" ng-class="{'active':opt.selected}" class="select-option"><span ng-if="opt.type=='chart'"><div ng-attr-style="background-image:url(/s/chart/{{opt.key}}.png);vertical-align:top" class="avatar"></div><div class="name"><div>{{opt.displayname}}</div><small class="grayed">({{opt.key}}) by {{opt.ownername}}</small></div></span><span ng-if="opt.type!='chart'"><div ng-attr-style="background-image:url(/s/avatar/{{opt.avatar || 0}}.jpg)" class="avatar"></div><div class="name">{{opt.displayname}} <small class="grayed">(id:{{opt.key}})</small></div></span><i class="fa fa-check pull-right"></i></div><div ng-show="portal.loading" class="select-hint grayed"><img src="/assets/img/loading.gif"/><span>loading...</span></div><div ng-show="portal.needchar&gt;0" class="select-hint grayed">type {{portal.needchar}} more chars... </div><div ng-show="!portal.options.length &amp;&amp; portal.needchar&lt;=0 &amp;&amp; !portal.loading" class="select-hint grayed">no result</div><div ng-show="portal.needchar&lt;=0 &amp;&amp; portal.end &amp;&amp; !portal.loading &amp;&amp; portal.options.length" class="select-hint grayed">that's all :)</div></div></div></div><div class="input-group-btn"><div data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle"><span ng-show="permEdit.perm=='admin'">act as owner</span><span ng-show="permEdit.perm=='write'">can edit</span><span ng-show="permEdit.perm=='comment'">can comment</span><span ng-show="permEdit.perm=='fork'">can fork</span><span ng-show="permEdit.perm=='read'">can read</span><span>&nbsp;</span><span class="caret"></span></div><ul class="dropdown-menu"><li ng-class="{'active':permEdit.perm=='admin'}" ng-click="permEdit.perm='admin'"><a>act as owner</a></li><li ng-class="{'active':permEdit.perm=='write'}" ng-click="permEdit.perm='write'"><a>can edit</a></li><li ng-class="{'active':permEdit.perm=='comment'}" ng-click="permEdit.perm='comment'"><a>can comment</a></li><li ng-class="{'active':permEdit.perm=='fork'}" ng-click="permEdit.perm='fork'"><a>can fork</a></li><li ng-class="{'active':permEdit.perm=='read'}" ng-click="permEdit.perm='read'"><a>can read</a></li></ul><div ng-click="addMember()" class="btn btn-default btn-sm">Add</div></div></div><div ng-click="addToken()" class="btn btn-link"><small><i class="fa fa-link"></i> generate shareable link</small></div><div ng-class="{'disabled':hasGlobal}" ng-click="addGlobal()" class="btn btn-link pull-right"><small><i class="fa fa-users"></i> add everyone</small></div><div class="sep light"></div><br/><label style="margin-bottom:0">permissions are given to:</label><div class="sep light"></div><div class="perm-list"><div ng-show="!perm.list.length" class="perm-item"><div class="grayed">no custom configuration...</div></div><div ng-cloak="ng-cloak" ng-repeat="perm in perm.list" class="perm-item"><div ng-if="perm.type=='chart'" ng-attr-style="background-image:url(/s/chart/{{perm.target || 0}}.png)" class="avatar"></div><div ng-if="perm.type!='chart'" ng-attr-style="background-image:url(/s/avatar/{{perm.avatar || 0}}.jpg)" class="avatar"></div><div class="info"><div class="name"><span>{{perm.displayname}}</span><small ng-cloak="ng-cloak"><a ng-show="perm.type=='token'" ng-attr-href="?token={{perm.target}}" target="_blank"><i class="fa fa-link"></i> edit link</a></small><span> &nbsp; </span><small ng-cloak="ng-cloak" ng-show="viewUrl"><a ng-show="perm.type=='token'" ng-attr-href="{{viewUrl}}?token={{perm.target}}" target="_blank"><i class="fa fa-link"></i> shareble link</a></small></div><div class="type"><span>{{perm.type}} </span><span>/ id: {{perm.target}}</span></div></div><div ng-click="removeMember(perm)" class="btn btn-text pull-right">&times;</div><div class="dropdown pull-right"><div data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle"><span ng-show="perm.perm=='admin'">act as owner</span><span ng-show="perm.perm=='write'">can edit</span><span ng-show="perm.perm=='comment'">can comment</span><span ng-show="perm.perm=='fork'">can fork</span><span ng-show="perm.perm=='read'">can read</span><span>&nbsp;</span><span class="caret"></span></div><ul class="dropdown-menu"><li ng-class="{'active':perm.perm=='admin'}" ng-click="perm.perm='admin'"><a>act as owner</a></li><li ng-class="{'active':perm.perm=='write'}" ng-click="perm.perm='write'"><a>can edit</a></li><li ng-class="{'active':perm.perm=='comment'}" ng-click="perm.perm='comment'"><a>can comment</a></li><li ng-class="{'active':perm.perm=='fork'}" ng-click="perm.perm='fork'"><a>can fork</a></li><li ng-class="{'active':perm.perm=='read'}" ng-click="perm.perm='read'"><a>can read</a></li></ul></div></div></div></div></div></div><div ng-show="panel.tab=='publish'"><div style="padding: 10px 0" class="perm-item"><div class="btn-group"><div ng-class="{'active':dataset.permission.switch=='publish'}" ng-click="dataset.permission.switch='publish'" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Published</span></div><div ng-class="{'active':dataset.permission.switch!='publish'}" ng-click="dataset.permission.switch='draft'" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Draft</span></div></div><div ng-show="dataset.permission.switch=='publish'" class="pull-right btn btn-text btn-sm"><b>visible</b> in embed code / share link</div><div ng-show="dataset.permission.switch!='publish'" class="pull-right btn btn-text btn-sm"><b>invisible</b> in embed code / share link</div></div><div class="sep"></div><label>Link</label><small style="margin-top:5px" class="pull-right"><a ng-attr-href="{{sharePanel.link}}" ng-class="{'disabled':target().permission.switch!='publish'}" target="_blank"><i class="fa fa-external-link"></i> Open in New Window</a></small><input ng-model="sharePanel.link" ng-disabled="target().permission.switch!='publish'" class="form-control input-sm"/><br/><label>Embed Code</label><div id="chart-edit-iframe-config" class="pull-right"><span ng-show="sharePanel.aspectRatio"><input type="text" placeholder="Width" ng-model="sharePanel.embed.widthRate" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/><span>&nbsp;: </span><input type="text" placeholder="Height" ng-model="sharePanel.embed.heightRate" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/></span><span ng-show="!sharePanel.aspectRatio"><input type="text" placeholder="Width" ng-model="sharePanel.embed.width" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/><span>&nbsp;&times;&nbsp;</span><input type="text" placeholder="Height" ng-model="sharePanel.embed.height" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/></span><div ng-class="{'disabled':target().permission.switch!='publish'}" class="checkbox"><label><input type="checkbox" ng-model="sharePanel.aspectRatio" ng-disabled="target().permission.switch!='publish'"/><small style="vertical-align:text-top">Preserve Aspect Ratio</small></label></div></div><textarea ng-cloak="ng-cloak" disabled="disabled" rows="2" ng-show="target().permission.switch!='publish'" placeholder="set public to get embed code" class="form-control"></textarea><textarea id="edit-embedcode" ng-cloak="ng-cloak" rows="2" ng-show="target().permission.switch=='publish'" data-clipboard-target="#edit-embedcode" ng-model="sharePanel.embedcode" class="form-control"></textarea><br/><label>Open Graph <small class="grayed">summary shown in SNS like facebook, twitter, etc </small></label><div class="sep nogap"></div><br/><div class="row"><div class="col-sm-6"><label>Title</label><input placeholder="title shown in social media" ng-model="target().name" class="form-control input-sm"/><br/><label>Share</label><div id="share-buttons" ng-class="{'disabled':target().permission.switch!='publish'}"><a ng-attr-href="{{sharePanel.social.facebook}}" target="_blank"><i style="color:#3b5998" class="fa fa-facebook-square"></i></a><a ng-attr-href="{{sharePanel.social.twitter}}" target="_blank"><i style="color:#00a0dc" class="fa fa-twitter-square"></i></a><a ng-attr-href="{{sharePanel.social.pinterest}}" target="_blank"><i style="color:#bd081c" class="fa fa-pinterest-square"></i></a><a ng-attr-href="{{sharePanel.social.linkedin}}" target="_blank"><i style="color:#00a0dc" class="fa fa-linkedin-square"></i></a><a ng-attr-href="{{sharePanel.social.email}}" target="_blank"><i style="color:#444" class="fa fa-envelope-square"></i></a></div></div><div class="col-sm-6"><label>Description</label><textarea rows="5" placeholder="summary shown in social media" ng-model="target().description" class="form-control input-sm"></textarea></div></div></div></div></div><div style="padding-left: 5px" class="panel-footer text-right"><div ng-click="clone()" ng-class="{'loading':save.handle}" class="btn btn-default btn-sm pull-left loader">Make a Copy</div><div ng-class="{'btn-glowing': needSave,'loading':save.handle}" ng-click="save()" class="btn btn-success btn-sm loader">SAVE</div><span>&nbsp;</span><div ng-click="panel.toggle()" class="btn btn-default btn-sm">Close</div></div></div></div><div ng-cloak="ng-cloak" ng-show="parser.csv.toggled" ng-click="parser.csv.toggle()" class="cover-modal ng-hide-animate ng-hide"></div><div ng-cloak="ng-cloak" ng-show="parser.csv.toggled" class="cover-modal-inner ng-hide-animate ng-hide"><div class="panel panel-default"><div style="min-height:100px" class="panel-body"><h3>Encoding</h3><p>If you have no idea what this is, just click OK.</p><select ng-model="parser.csv.encoding" ng-options="option for option in parser.csv.encodings" class="form-control"></select></div><div class="panel-footer text-right"><div ng-click="parser.csv.gotencoding()" class="btn btn-primary">OK</div><span>&nbsp;</span><div ng-click="parser.csv.toggle()" class="btn btn-default">Cancel</div></div></div></div><div ng-cloak="ng-cloak" ng-show="parser.gsheet.toggled" ng-click="parser.gsheet.toggle()" class="cover-modal ng-hide-animate ng-hide"></div><div ng-cloak="ng-cloak" ng-show="parser.gsheet.toggled" class="cover-modal-inner ng-hide-animate ng-hide"><div class="panel panel-default"><div class="panel-body"><h3>Import from Google sheets</h3><div class="sep"></div><br/><div class="input-group"><input placeholder="search for spreadsheet title..." ng-model="parser.gsheet.title" class="form-control"/><span class="input-group-btn"><div class="btn btn-default"><i class="fa fa-search"></i></div></span></div><div id="gsheet-files" class="gsheet-files"><div ng-repeat="f in parser.gsheet.files" ng-click="parser.gsheet.load(f)" class="gsheet-file"><a target="_blank" ng-attr-href="https://docs.google.com/spreadsheets/d/{{f.file.id}}" class="pull-right"><span>open in new window </span><i class="fa fa-external-link"></i></a><span>{{f.file.name}}</span></div><div ng-show="!parser.gsheet.files.length" class="gsheet-file empty">no file</div><div ng-show="parser.gsheet.loading" class="text-center"><div style="display:inline-block" class="loader loading alone sm"></div></div><div id="gsheet-list-end"></div></div></div><div class="panel-footer text-right"><div ng-click="parser.gsheet.toggle()" class="btn btn-default">Cancel</div></div></div></div><div ng-cloak="ng-cloak" ng-show="panel.name.toggled" ng-click="panel.toggle('name')" class="cover-modal ng-hide-animate ng-hide"></div><div ng-cloak="ng-cloak" ng-show="panel.name.toggled" class="cover-modal-inner ng-hide-animate ng-hide"><div class="panel panel-default"><div style="min-height:110px" class="panel-body"><h3 ng-if="!dataset.name">Dataset Name</h3><h3 ng-if="dataset.name">Rename Dataset</h3><div class="sep"></div><br/><div style="width:94%;margin:auto"><p ng-if="!dataset.name">Looks like your dataset doesn't have a name yet. Let's give it a name:</p><p ng-if="dataset.name">Give your dataset a new name:</p><input id="dataset-name-input" placeholder="e.g., US 2015 Population" ng-model="panel.name.value" ng-keydown="panel.name.keyhandler($event)" class="form-control"/></div><br/></div><div class="panel-footer text-right"><div ng-class="{'disabled':!panel.name.value}" ng-click="panel.name.action(0)" class="btn btn-primary"><span>&nbsp; OK &nbsp;</span></div><span>&nbsp;</span><div ng-click="panel.name.action(1)" class="btn btn-default">Cancel</div></div></div></div><div id="dataset-editor"><div id="dataset-create-methods"><div class="navbar navbar-default dataset-toolbar"><div class="container-fluid"><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle"><i class="fa fa-file-o"></i> File <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="#" ng-click="reset('',true)"><i class="fa align16"></i> New</a></li><li class="divider"></li><li><a href="#" ng-click="save()"><i class="fa fa-floppy-o align16"></i> Save</a></li><li ng-class="{'disabled':!dataset.key}" ng-click="clone()"><a href="#"><i class="fa fa-clone align16"></i> Make a Copy</a></li><li ng-class="{'disabled':!dataset.key}" ng-click="panel.name.toggle(dataset.name)"><a href="#"><i class="fa align16"></i> Rename</a></li><li class="divider"></li><li ng-class="{'disabled':!dataset.key}" ng-click="delete(dataset)"><a href="#"><i class="fa fa-trash-o align16"></i> Delete</a></li></ul></li><li id="dataset-import-dropdown" class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle"><i class="fa fa-cloud-upload"></i> Import... <span class="caret"></span></a><ul class="dropdown-menu"><li class="dropdown"><a href="#" class="toggle-filepick"><input id="dataset-edit-csv-file" type="file" askencoding="parser.csv.askencoding" readby="parser.csv.import" encoding="{{parser.csv.encoding}}"/><span><i class="fa fa-file-text-o align16"></i> upload CSV file ...</span></a></li><li><a href="#" class="toggle-filepick"><input id="dataset-edit-xls-file" type="file" readby="parser.xls.read"/><span><i class="fa fa-file-excel-o align16"></i> upload Excel (.xls, .xlsx)</span></a></li><li class="divider"></li><li ng-click="parser.gsheet.toggle()"><a href="#"><i class="fa fa-table align16"></i> from Google Sheet</a></li></ul></li></ul><ul class="nav navbar-nav"><li ng-class="{'disabled':!dataset.key}"><a ng-click="panel.toggle()"><i class="fa fa-users"></i> Share</a></li></ul></div></div></div></div><!--dev--><div id="dataset-editbox"><div class="inner"><div id="dataset-edit-grid" ng-show="grid.toggled" class="sheet-outer"><div class="sheet clusterize"><div class="sheet-head"></div><div class="sheet-body-outer"><div class="sheet-body clusterize-scroll"><div class="sheet-cells clusterize-content"></div></div></div></div></div><textarea id="dataset-edit-text" ng-cloak="ng-cloak" ng-show="!grid.toggled" rows="6" ng-model="rawdata" placeholder="paste or drag your data here..." ng-disabled="dataset.type.location=='sample'" class="form-control"></textarea></div><div id="dataset-editbox-meta"><div class="btn-group"><div ng-class="{'active':grid.toggled}" ng-click="grid.toggle(true)" class="btn btn-default"><i class="fa fa-table"></i> Grid</div><div ng-class="{'active':!grid.toggled}" ng-click="grid.toggle(false)" class="btn btn-default"><i class="fa fa-pencil"></i> Text</div></div><span ng-cloak="ng-cloak" ng-class="{'grayed':parse.rows==0}" style="display:inline-block;padding:8px 10px;border:1px solid transparent;font-size:12px">{{grid.data.rows.length || 0}} rows, {{grid.data.headers.length || 0}} fields, size: {{(grid.data.size || 0)|size}} <small>(estimated)</small></span><div ng-class="{'loading':loading}" style="padding-left:0" class="btn btn-sm loader">&nbsp;</div><div class="pull-right"><div style="min-width:140px" ng-click="save()" class="btn btn-primary">Save</div></div></div></div></div><div class="high-modal"><div id="data-edit-csv-modal" style="padding-top: 100px" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><label>Upload CSV file:</label><div class="input-group"><input id="data-edit-csv-file" type="file" style="border: 1px solid #ccc" class="form-control"/><span class="input-group-btn"><button data-toggle="dropdown" type="button" style="border: 1px solid #ccc;border-radius:0" class="btn btn-default dropdown-toggle"><span>Encoding :</span><small>{{parser.encoding}}&nbsp;</small><span class="caret"></span></button><ul class="dropdown-menu dropdown-meu-right"><li ng-class="{'active':parser.encoding=='ISO-8859-1'}"><a ng-click="parser.encoding='ISO-8859-1'">ISO-8859-1</a></li><li ng-class="{'active':parser.encoding=='Big5'}"><a ng-click="parser.encoding='BIG5'">BIG5</a></li><li ng-class="{'active':parser.encoding=='GB2312'}"><a ng-click="parser.encoding='GB2312'">GB2312</a></li><li ng-class="{'active':parser.encoding=='UTF-8'}"><a ng-click="parser.encoding='UTF-8'">UTF-8</a></li></ul><button type="button" style="border: 1px solid #ccc" ng-click="parser.csv.read()" class="btn btn-default">Read</button></span></div></div></div></div></div><div id="data-edit-gsheet-modal" style="padding-top: 100px" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><label>From Google Spreadsheet URL:</label><div class="input-group"><input type="text" style="border: 1px solid #ccc" ng-model="parser.gsheet.url" class="form-control"/><span class="input-group-btn"><button type="button" style="border: 1px solid #ccc" ng-click="parser.gsheet.read()" class="btn btn-default">Read</button></span></div></div></div></div></div></div>