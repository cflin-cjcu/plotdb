<div ng-cloak="ng-cloak" ng-show="panel.toggled" ng-click="panel.toggle()" class="cover-modal"></div><div ng-cloak="ng-cloak" ng-show="panel.toggled" class="cover-modal-inner narrow"><div ng-init="panel.tab='publish'" class="panel panel-default"><div class="panel-heading">&nbsp;</div><div class="panel-body"><div ng-cloak="ng-cloak"><div ng-click="panel.toggle()" class="closebtn inner lg inverse"></div><ul class="nav nav-tabs"><li ng-class="{'active':panel.tab=='publish'}" ng-click="panel.tab='publish'"><a href="#"><i class="fa fa-bullhorn"></i> Publish</a></li><li ng-class="{'active':panel.tab=='permission'}" ng-click="panel.tab='permission'"><a href="#"><i class="fa fa-lock"></i> Permission</a></li></ul><div ng-show="panel.tab=='permission'" style="position:relative"><div ng-hide="isAdmin &amp;&amp; (user.data.payment.plan &gt; 1 || (plConfig.mode%2))" class="panel-lock"><div ng-show="!isAdmin">{{"You don't have permission to change this"|i18n}}</div><div ng-show="isAdmin"><div style="margin-top: -30px"><span>{{'Upgrade to enable privacy control'|i18n}}!</span><br/><br/><a href="/pricing/" target="_blank" class="btn btn-primary">{{"let's check out the plans"|i18n}}</a></div></div></div><div style="padding: 10px 0" class="perm-item"><label>Searchable?</label><br/><div class="btn-group"><div ng-class="{'active':dataset.searchable}" ng-click="dataset.searchable=true" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> On</span></div><div ng-class="{'active':!dataset.searchable}" ng-click="dataset.searchable=false" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Off</span></div></div><div ng-show="dataset.searchable" class="pull-right btn btn-text btn-sm"><b>shown</b> in search result</div><div ng-show="!dataset.searchable" class="pull-right btn btn-text btn-sm"><b>hidden</b> from search result</div></div><div class="sep"></div><div ng-controller="permEdit" ng-init="setPerm('dataset.permission')"><div class="perm-panel"><label>{{'Add new permission'|i18n}}</label><div class="input-group long"><div ng-controller="plSelectController" ng-init="init(permEdit.list,'entityChart',undefined,{})"><div plselect="plselect" ng-portal="portal" ng-cloak="ng-cloak" ng-type="entityChart" class="select-box "><div class="select-input form-control"><div ng-repeat="item in portal.data" class="select-option"><i ng-click="remove(item,$event)" class="fa fa-close"></i><span ng-if="item.type=='chart'"><div ng-attr-style="background-image:url(/s/chart/{{item.key}}.png)" class="avatar"></div><div class="name"><span>{{item.displayname}}</span></div></span><span ng-if="item.type=='folder'"><div class="name">{{item.displayname}} <small class="grayed">(id:{{item.key}})</small></div></span><span ng-if="item.type!='chart' &amp;&amp; item.type!='folder'"><div ng-attr-style="background-image:url(/s/avatar/{{item.avatar || 0}}.jpg)" class="avatar"></div><div class="name">{{item.displayname}} <small class="grayed">(id:{{item.key}})</small></div></span></div><input/></div><div class="select-dropdown"><div>&nbsp;</div><div ng-repeat="opt in portal.options" ng-click="toggle(opt)" ng-class="{'active':opt.selected}" class="select-option"><span ng-if="opt.type=='chart'"><div ng-attr-style="background-image:url(/s/chart/{{opt.key}}.png);vertical-align:top" class="avatar"></div><div class="name"><div>{{opt.displayname}}</div><small class="grayed">({{opt.key}}) by {{opt.ownername}}</small></div></span><span ng-if="opt.type=='folder'"><div class="name">{{opt.displayname}} <small class="grayed">(id:{{opt.key}})</small></div></span><span ng-if="opt.type!='chart' &amp;&amp; opt.type!='folder'"><div ng-attr-style="background-image:url(/s/avatar/{{opt.avatar || 0}}.jpg)" class="avatar"></div><div class="name">{{opt.displayname}} <small class="grayed">(id:{{opt.key}})</small></div></span><i class="fa fa-check pull-right"></i></div><div ng-show="portal.loading" class="select-hint grayed"><img src="/assets/img/loading.gif"/><span>{{'loading'|i18n}}...</span></div><div ng-show="portal.needchar&gt;0" class="select-hint grayed">type {{portal.needchar}} more chars... </div><div ng-show="!portal.options.length &amp;&amp; portal.needchar&lt;=0 &amp;&amp; !portal.loading" class="select-hint grayed"> <span>{{'no result'|i18n}}.</span><a ng-if="portal.config.create" ng-click="create()">{{'create one with this name'|i18n}}</a></div><div ng-show="portal.needchar&lt;=0 &amp;&amp; portal.end &amp;&amp; !portal.loading &amp;&amp; portal.options.length" class="select-hint grayed">{{"that's all"|i18n}} :)</div></div></div></div><div class="input-group-btn"><div data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle"><span ng-show="permEdit.perm=='admin'">{{'act as owner'|i18n}}</span><span ng-show="permEdit.perm=='write'">{{'can edit'|i18n}}</span><span ng-show="permEdit.perm=='comment'">{{'can comment'|i18n}}</span><span ng-show="permEdit.perm=='fork'">{{'can fork'|i18n}}</span><span ng-show="permEdit.perm=='read'">{{'can read'|i18n}}</span><span>&nbsp;</span><span class="caret"></span></div><ul class="dropdown-menu"><li ng-class="{'active':permEdit.perm=='admin'}" ng-click="permEdit.perm='admin'"><a>{{'act as owner'|i18n}}</a></li><li ng-class="{'active':permEdit.perm=='write'}" ng-click="permEdit.perm='write'"><a>{{'can edit'|i18n}}</a></li><li ng-class="{'active':permEdit.perm=='comment'}" ng-click="permEdit.perm='comment'"><a>{{'can comment'|i18n}}</a></li><li ng-class="{'active':permEdit.perm=='fork'}" ng-click="permEdit.perm='fork'"><a>{{'can fork'|i18n}}</a></li><li ng-class="{'active':permEdit.perm=='read'}" ng-click="permEdit.perm='read'"><a>{{'can read'|i18n}}</a></li></ul><div ng-click="addMember()" class="btn btn-default btn-sm">{{'Add'|i18n}}</div></div></div><div ng-click="addToken()" class="btn btn-link"><small><i class="fa fa-link"></i> {{'generate shareable link'|i18n}}</small></div><div ng-class="{'disabled':hasGlobal}" ng-click="addGlobal()" class="btn btn-link pull-right"><small><i class="fa fa-users"></i> {{'add everyone'|i18n}}</small></div><div class="sep light"></div><br/><label style="margin-bottom:0">{{'permissions are given to'|i18n}}:</label><div class="sep light"></div><div class="perm-list"><div ng-show="!perm.list.length" class="perm-item"><div class="grayed">{{'no custom configuration'|i18n}}...</div></div><div ng-cloak="ng-cloak" ng-repeat="perm in perm.list" class="perm-item"><div ng-if="perm.type=='chart'" ng-attr-style="background-image:url(/s/chart/{{perm.target || 0}}.png)" class="avatar"></div><div ng-if="perm.type!='chart'" ng-attr-style="background-image:url(/s/avatar/{{perm.avatar || 0}}.jpg)" class="avatar"></div><div class="info"><div class="name"><span>{{perm.displayname}}</span><small ng-cloak="ng-cloak"><a ng-show="perm.type=='token'" ng-attr-href="?token={{perm.target}}" target="_blank"><i class="fa fa-link"></i> {{'edit link'|i18n}}</a></small><span> &nbsp; </span><small ng-cloak="ng-cloak" ng-show="viewUrl"><a ng-show="perm.type=='token'" ng-attr-href="{{viewUrl}}?token={{perm.target}}" target="_blank"><i class="fa fa-link"></i> {{'shareble link'|i18n}}</a></small></div><div class="type"><span>{{perm.type|i18n}} </span><span>/ id: {{perm.target}}</span></div></div><div ng-click="removeMember(perm)" class="btn btn-text pull-right">&times;</div><div class="dropdown pull-right"><div data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle"><span ng-show="perm.perm=='admin'">{{'act as owner'|i18n}}</span><span ng-show="perm.perm=='write'">{{'can edit'|i18n}}</span><span ng-show="perm.perm=='comment'">{{'can comment'|i18n}}</span><span ng-show="perm.perm=='fork'">{{'can fork'|i18n}}</span><span ng-show="perm.perm=='read'">{{'can read'|i18n}}</span><span>&nbsp;</span><span class="caret"></span></div><ul class="dropdown-menu"><li ng-class="{'active':perm.perm=='admin'}" ng-click="perm.perm='admin'"><a>{{'act as owner'|i18n}}</a></li><li ng-class="{'active':perm.perm=='write'}" ng-click="perm.perm='write'"><a>{{'can edit'|i18n}}</a></li><li ng-class="{'active':perm.perm=='comment'}" ng-click="perm.perm='comment'"><a>{{'can comment'|i18n}}</a></li><li ng-class="{'active':perm.perm=='fork'}" ng-click="perm.perm='fork'"><a>{{'can fork'|i18n}}</a></li><li ng-class="{'active':perm.perm=='read'}" ng-click="perm.perm='read'"><a>{{'can read'|i18n}}</a></li></ul></div></div></div></div></div></div><div ng-show="panel.tab=='publish'"><div style="padding: 10px 0" class="perm-item"><div class="btn-group"><div ng-class="{'active':dataset.permission.switch=='publish'}" ng-click="dataset.permission.switch='publish'" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Published</span></div><div ng-class="{'active':dataset.permission.switch!='publish'}" ng-click="dataset.permission.switch='draft'" class="btn btn-default btn-sm"><i class="fa fa-check text-success"></i><span> Draft</span></div></div><div ng-show="dataset.permission.switch=='publish'" class="pull-right btn btn-text btn-sm"><b>visible</b> in embed code / share link</div><div ng-show="dataset.permission.switch!='publish'" class="pull-right btn btn-text btn-sm"><b>invisible</b> in embed code / share link</div></div><div class="sep"></div><label>{{'Link'|i18n}}</label><small style="margin-top:5px" class="pull-right"><a ng-attr-href="{{sharePanel.link}}" ng-class="{'disabled':target().permission.switch!='publish'}" target="_blank"><i class="fa fa-external-link"></i> {{'open in new window'|i18n}}</a></small><input ng-model="sharePanel.link" ng-disabled="target().permission.switch!='publish'" class="form-control input-sm"/><br/><label>{{'Embed Code'|i18n}}</label><div id="chart-edit-iframe-config" class="pull-right"><span ng-show="sharePanel.aspectRatio"><input type="text" placeholder="Width" ng-model="sharePanel.embed.widthRate" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/><span>&nbsp;: </span><input type="text" placeholder="Height" ng-model="sharePanel.embed.heightRate" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/></span><span ng-show="!sharePanel.aspectRatio"><input type="text" placeholder="Width" ng-model="sharePanel.embed.width" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/><span>&nbsp;&times;&nbsp;</span><input type="text" placeholder="Height" ng-model="sharePanel.embed.height" ng-disabled="target().permission.switch!='publish'" class="input-sm form-control"/></span><div ng-class="{'disabled':target().permission.switch!='publish'}" class="checkbox"><label><input type="checkbox" ng-model="sharePanel.aspectRatio" ng-disabled="target().permission.switch!='publish'"/><small style="vertical-align:text-top">{{'Preserve Aspect Ratio'|i18n}}</small></label></div></div><textarea ng-cloak="ng-cloak" disabled="disabled" rows="2" ng-show="target().permission.switch!='publish'" placeholder="set public to get embed code" class="form-control"></textarea><textarea id="edit-embedcode" ng-cloak="ng-cloak" rows="2" ng-show="target().permission.switch=='publish'" data-clipboard-target="#edit-embedcode" ng-model="sharePanel.embedcode" class="form-control"></textarea><br/><label>Open Graph <small class="grayed">{{'summary shown in SNS like facebook, twitter, etc'|i18n}} </small></label><div class="sep nogap"></div><br/><div class="row"><div class="col-sm-6"><label>{{'Title'|i18n}}</label><div class="pull-right"><div style="margin:0" class="checkbox"><label><input type="checkbox" ng-model="target().metashow"/><small style="vertical-align:text-top">{{'Show in Chart'|i18n}}</small></label></div></div><input placeholder="title shown in social media" ng-model="target().name" class="form-control input-sm"/><br/><label>{{'Footer'|i18n}}</label><input placeholder="e.g., data source" ng-model="target().footer" class="form-control input-sm"/></div><div class="col-sm-6"><label>{{'Description'|i18n}}</label><textarea rows="5" placeholder="summary shown in social media" ng-model="target().description" class="form-control input-sm"></textarea></div></div></div></div></div><div style="padding-left: 5px" class="panel-footer text-right"><div ng-click="clone()" ng-class="{'loading':save.handle}" class="btn btn-default btn-sm pull-left loader">Make a Copy</div><div ng-class="{'btn-glowing': needSave,'loading':save.handle}" ng-click="save()" class="btn btn-success btn-sm loader">SAVE</div><span>&nbsp;</span><div ng-click="panel.toggle()" class="btn btn-default btn-sm">Close</div></div></div></div>