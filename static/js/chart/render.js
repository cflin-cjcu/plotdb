function in$(e,t){for(var n=-1,o=t.length>>>0;++n<o;)if(e===t[n])return!0;return!1}var plotdomain;plotdomain="http://localhost/",window.addEventListener("click",function(){return window.parent.postMessage({type:"click",payload:""},plotdomain)}),window.thread={count:0,inc:function(e){return e?this.count=(this.count||0)+1:void 0},dec:function(e){return e?this.count=(this.count||1)-1:void 0},racing:function(){return this.count>1}},$(document).ready(function(){var e,t,n,o,r,a,i,d;return e=function(e){var t;return"snapshot"===(t=e.data.type)||"getsvg"===t||"getpng"===t?a(e.data.type):"render"===e.data.type?i(e.data.payload,e.data.rebind):"parse"===e.data.type?r(e.data.payload,"chart"):"parse-theme"===e.data.type?r(e.data.payload,"theme"):"reload"===e.data.type?window.location.reload():"colorblind-emu"===e.data.type?o(e.data.payload):void 0},window.addEventListener("error",function(e){var t,o,r;return t=/blobhttp:%3A\/\/[^:]+:/,o=e.error.stack,t.exec(o)?(o=o.split(t).join("line "),r=e.message+" at line "+(e.lineno-1)+".",e.message.indexOf(o)<0&&(r+=" Callstack: \n"+o)):r=e.message+" at line "+(e.lineno-1)+".",n(r,e.lineno-1)}),t=function(e,t){return null==t&&(t=!0),new Promise(function(n){var o,r,a;return window.errorMessage="",o=t?"module":"moduleLocal",e="(function() { "+e+"; window."+o+" = module; })();",window.codeURL=r=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),a=document.createElement("script"),a.onload=function(){var e;URL.revokeObjectURL(r),window[o]&&(window[o].identity=parseInt(1e3*Math.random())),n(window[o]);try{return document.body.removeChild(a)}catch(t){return e=t}},a.src=r,document.body.appendChild(a)})},n=function(e,t){var n,o,r,a;return null==t&&(t=0),n=e?typeof e!=typeof{}?e+"":e.stack?e.stack:e.toString():"plot failed with unknown error",o=/blob:http%3A\/\/[^:]+:/,o.exec(n)&&(n=n.split(o).join("line ")),t||(r=/line (\d+):\d+/.exec(n),t=r?parseInt(r[1]):0),n.length>1024&&(n=n.substring(0,1024)+"..."),a=n.split("\n"),a.length>4&&(n=a.splice(0,4).join("\n")),window.parent.postMessage({type:"error",payload:{msg:n,lineno:t}},plotdomain)},o=function(e){var t;return t=["normal","protanopia","protanomaly","deuteranopia","deuteranomaly","tritanopia","tritanomaly","achromatopsia","achromatomaly"],in$(e,t)||(e="normal"),d3.select("body").style({"-webkit-filter":"url('#"+e+"')",filter:"url('#"+e+"')"})},r=function(e,o){var r;try{if("chart"===o)return t(e,!1).then(function(e){var t,n,o;return t=e.exports,n=JSON.stringify((o={},o.dimension=t.dimension,o.config=t.config,o)),window.parent.postMessage({type:"parse",payload:n},plotdomain)});if("theme"===o)return t(e,!1).then(function(e){var t,n,o;return t=e.exports,n=JSON.stringify((o={},o.config=t.config,o)),window.parent.postMessage({type:"parse-theme",payload:n},plotdomain)})}catch(a){return r=a,n(r)}},a=function(e){var t,n,o,r,a,i,d,l,c,s,u,p,h;null==e&&(e="snapshot");try{for(d3.selectAll("#container svg").each(function(){var e,t,n;return e=this.getBoundingClientRect(),t=e.width,n=e.height,d3.select(this).attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t,height:n})}),t=document.querySelector("#container svg"),n=t.querySelectorAll("style"),o=0,r=n.length;r>o;++o)a=o,i=n[a],i.generated&&t.removeChild(i);for(n=document.body.querySelectorAll("#wrapper > style"),o=n.length-1;o>=0;--o)a=o,i=n[a].cloneNode(!0),i.generated=!0,t.insertBefore(i,t.childNodes[0]);return d=t.getBoundingClientRect(),l=d.width,c=d.height,s=t.outerHTML,"getsvg"===e?window.parent.postMessage({type:"getsvg",payload:s},plotdomain):(u=new Image,u.onload=function(){var t,n,o;return t=c>l?l:c,o=document.createElement("canvas"),o.width=l,o.height=t,n=o,n.getContext("2d").drawImage(u,0,0,l,t,0,0,l,t),window.parent.postMessage({type:e,payload:n.toDataURL()},plotdomain)},p=base64.encode(utf8.encode(s)),u.src="data:image/svg+xml;charset=utf-8;base64,"+p)}catch(w){return h=w,console.log(h),window.parent.postMessage({type:e,payload:null},plotdomain)}},i=function(e,o){var r,a,i,d,l,c,s,u,p,h,w,m,y;null==o&&(o=!0),r=["code","style","doc"].map(function(t){return(e.chart||(e.chart={}))[t].content}),a=r[0],i=r[1],d=r[2],r=["data","assets"].map(function(t){return e.chart[t]}),l=r[0],c=r[1],s=e.chart.dimension||{},u=e.chart.config||{},p=e.theme||{},h=!window.module||!window.module.inited||window.module.execError,h&&sched.clear(),thread.inc(h);try{return h?(w=document.getElementById("wrapper"),w||(w=document.createElement("div"),w.setAttribute("id","wrapper"),document.body.appendChild(w)),$(w).html(["<style type='text/css'>/* <![CDATA[ */"+i+"/* ]]> */</style>",(p.style||(p.style={})).content?"<style type='text/css'>/* <![CDATA[ */"+p.style.content+"/* ]]> */</style>":void 0,"<div id='container'>","<div style='height:0'>&nbsp;</div>",d,(p.doc||(p.doc={})).content?p.doc.content:void 0,"</div>"].join("")),m=t(a)):m=Promise.resolve(window.module),m.then(function(e){var t,n,r,a,i,d,p,w,m,y,g,f,v,b,x,k,L,M;if(thread.racing())return thread.dec(h);t=document.getElementById("container"),n=e.exports,l&&l.length||!n.sample||(l=n.sample);for(r in a=u)for(i=a[r],d=0,w=(p=i.type).length;w>d;++d){m=p[d],m=plotdb[m.name];try{if(m.test&&m.parse&&m.test(i.value)){i.value=m.parse(i.value);break}}catch(E){y=E,console.log("plotdb type parsing error: "+m.name),console.log(y.stack+"")}}for(r in a=n.config)i=a[r],u[r]=null==u[r]||null==u[r].value?i["default"]:u[r].value;for(n.assets=g={},d=0,w=(a=c).length;w>d;++d){for(f=a[d],v=atob(f.content),b=new Uint8Array(v.length),x=0,k=v.length;k>x;++x)L=x,b[L]=v.charCodeAt(L);f.blob=new Blob([b],{type:f.type}),f.url=URL.createObjectURL(f.blob),f.datauri=["data:",f.type,";charset=utf-8;base64,",f.content].join(""),g[f.name]=f}return n.config=u,(o||h||!n.root||!n.data)&&(n.root=t,n.data=l,n.dimension=s),M=Promise.resolve(),h&&n.init&&(M=M.then(function(){var t;if(!thread.racing())return t=e.inited?null:n.init(),e.inited=!0,t})),M.then(function(){return thread.racing()?thread.dec(h):(n.resize(),(o||h)&&n.bind(),n.render(),e.execError=!1,window.parent.postMessage({type:"error",payload:window.errorMessage||""},plotdomain))})})["catch"](function(e){return module.execError=!0,thread.dec(h),n(e)})}catch(g){return y=g,thread.dec(h),n(y)}},window.addEventListener("message",e,!1),d=null,window.addEventListener("resize",function(){return d&&clearTimeout(d),d=setTimeout(function(){var e;return d=null,window.module&&window.module.exports?(e=window.module.exports,e.resize(),e.render()):void 0},400)}),window.addEventListener("keydown",function(e){return!e.metaKey&&!e.altKey||13!==e.keyCode&&13!==e.which?void 0:window.parent.postMessage({type:"alt-enter"},plotdomain)}),window.parent.postMessage({type:"loaded"},plotdomain)});