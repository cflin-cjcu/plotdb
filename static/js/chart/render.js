var plotdomain;plotdomain="http://localhost/",window.addEventListener("click",function(){return window.parent.postMessage({type:"click",payload:""},plotdomain)}),$(document).ready(function(){var e,t,n,o,r,a,i;return e=function(e){return"snapshot"===e.data.type?r():"render"===e.data.type?a(e.data.payload,e.data.rebind):"parse"===e.data.type?o(e.data.payload):"reload"===e.data.type?window.location.reload():void 0},window.addEventListener("error",function(e){var t,o,r;return t=/blobhttp:%3A\/\/[^:]+:/,o=e.error.stack,t.exec(o)?(o=o.split(t).join("line "),r=e.message+" at line "+(e.lineno-1)+".",e.message.indexOf(o)<0&&(r+=" Callstack: \n"+o)):r=e.message+" at line "+(e.lineno-1)+".",n(r,e.lineno-1)}),t=function(e,t){return null==t&&(t=!0),new Promise(function(n){var o,r,a;return window.errorMessage="",o=t?"module":"moduleLocal",e="(function() { "+e+"; window."+o+" = module; })();",window.codeURL=r=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),a=document.createElement("script"),a.onload=function(){var e;URL.revokeObjectURL(r),n(window[o]);try{return document.body.removeChild(a)}catch(t){return e=t}},a.src=r,document.body.appendChild(a)})},n=function(e,t){var n,o,r,a;return null==t&&(t=0),n=e?typeof e!=typeof{}?e+"":e.stack?e.stack:e.toString():"plot failed with unknown error",o=/blob:http%3A\/\/[^:]+:/,o.exec(n)&&(n=n.split(o).join("line ")),t||(r=/line (\d+):\d+/.exec(n),t=r?parseInt(r[1]):0),n.length>1024&&(n=n.substring(0,1024)+"..."),a=n.split("\n"),a.length>4&&(n=a.splice(0,4).join("\n")),window.parent.postMessage({type:"error",payload:{msg:n,lineno:t}},plotdomain)},o=function(e){var o;try{return t(e,!1).then(function(e){var t,n,o;return t=e.exports,n=JSON.stringify((o={},o.dimension=t.dimension,o.config=t.config,o)),window.parent.postMessage({type:"parse",payload:n},plotdomain)})}catch(r){return o=r,n(o)}},r=function(){var e,t,n,o,r,a,i;try{return d3.selectAll("#container svg").each(function(){var e,t,n;return e=this.getBoundingClientRect(),t=e.width,n=e.height,d3.select(this).attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t,height:n})}),e=document.querySelector("#container svg"),t=e.getBoundingClientRect(),n=t.width,o=t.height,r=document.querySelector("#container svg").outerHTML,a=new Image,a.onload=function(){var e,t;return t=document.createElement("canvas"),t.width=n,t.height=o,e=t,e.getContext("2d").drawImage(a,0,0),window.parent.postMessage({type:"snapshot",payload:e.toDataURL()},plotdomain)},a.src="data:image/svg+xml;base64,"+btoa(r)}catch(d){return i=d,window.parent.postMessage({type:"snapshot",payload:null},plotdomain)}},a=function(e,o){var r,a,i,d,l,s,c,u;null==o&&(o=!0),r=e.code.content,a=e.style.content,i=e.doc.content,d=e.data,l=e.assets,s=e.config||{},sched.clear();try{return o||!window.module?($(document.body).html("<style type='text/css'>"+a+"</style><div id='container'>"+i+"</div>"),c=t(r)):c=Promise.resolve(window.module),c.then(function(e){var t,n,r,a,i,d,c,u,p,w,m,g,y,h,v,f,b,x;window.module=e,t=document.getElementById("container"),n=e.exports,!r&&n.sample&&(r=n.sample);for(a in i=s)for(d=i[a],c=0,p=(u=d.type).length;p>c;++c){w=u[c],w=plotdb[w.name];try{if(w.test&&w.parse&&w.test(d.value)){d.value=w.parse(d.value);break}}catch(L){m=L,console.log("plotdb type parsing error: "+w.name),console.log(m.stack+"")}}for(a in i=n.config)d=i[a],s[a]=null==s[a]||null==s[a].value?d["default"]:s[a].value;for(n.assets=g={},c=0,p=(i=l).length;p>c;++c){for(y=i[c],h=atob(y.content),v=new Uint8Array(h.length),f=0,b=h.length;b>f;++f)x=f,v[x]=h.charCodeAt(x);y.blob=new Blob([v],{type:y.type}),y.url=URL.createObjectURL(y.blob),y.datauri=["data:",y.type,";base64,",y.content].join(""),g[y.name]=y}return n.config=s,(o||!n.root||!n.data||e.execError)&&(n.root=t,n.data=r),(o||!e.inited||e.execError)&&(n.init&&n.init(),e.inited=!0,n.bind()),n.resize(),n.render(),e.execError=!1,window.parent.postMessage({type:"error",payload:window.errorMessage||""},plotdomain)})["catch"](function(e){return module.execError=!0,n(e)})}catch(p){return u=p,n(u)}},window.addEventListener("message",e,!1),i=null,window.addEventListener("resize",function(){return i&&clearTimeout(i),i=setTimeout(function(){var e;return i=null,window.module&&window.module.exports?(e=window.module.exports,e.resize(),e.render()):void 0},700)}),window.addEventListener("keydown",function(e){return!e.metaKey&&!e.altKey||13!==e.keyCode&&13!==e.which?void 0:window.parent.postMessage({type:"alt-enter"},plotdomain)}),window.parent.postMessage({type:"loaded"},plotdomain)});