// Generated by LiveScript 1.3.1
var htmlCharMap, escape, onmessage;
htmlCharMap = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#039;'
};
escape = function(text){
  text == null && (text = "");
  return text.replace(/[&<>"']/g, function(m){
    return htmlCharMap[m];
  });
};
onmessage = function(e){
  var data, len, res$, i$, to$, i, j, w, trs, ths;
  data = e.data;
  if (data.headers.length < 10) {}
  len = {
    head: data.headers.length < 10
      ? 10
      : data.headers.length + 1,
    rows: data.rows.length < 100
      ? 100
      : data.rows.length + 10
  };
  res$ = [];
  for (i$ = 0, to$ = len.head; i$ < to$; ++i$) {
    i = i$;
    res$.push(data.headers[i] || '');
  }
  data.headers = res$;
  res$ = [];
  for (i$ = 0, to$ = len.rows; i$ < to$; ++i$) {
    i = i$;
    res$.push(data.rows[i] || (fn$()));
  }
  data.rows = res$;
  w = 100 / len.head + "%";
  if (len.head > 10) {
    w = "10%";
  }
  trs = data.rows.map(function(row, i){
    return "<div>" + data.headers.map(function(d, j){
      return "<div contenteditable='true' row='" + i + "' col='" + j + "' style='width:" + w + "'>" + (escape(row[j]) || '') + "</div>";
    }).join("") + "</div>";
  });
  ths = "<div>" + data.headers.map(function(d, i){
    return ("<div style='width:" + w + "'><div contenteditable='true' col='" + i + "'>&nbsp;" + escape(d) + "</div>") + ("<small class='grayed'>&nbsp;" + (d ? 'Any' : '') + "</small></div>");
  }).join("") + "</div>";
  return postMessage({
    trs: trs,
    ths: ths
  });
  function fn$(){
    var i$, to$, results$ = [];
    for (i$ = 0, to$ = len.head; i$ < to$; ++i$) {
      j = i$;
      results$.push('');
    }
    return results$;
  }
};