// Generated by LiveScript 1.3.1
var revert, onmessage;
revert = function(dataset){
  var collen, rowlen, ref$, ret, i$, i, j, v;
  collen = (dataset.fields || (dataset.fields = [])).length;
  rowlen = ((ref$ = (dataset.fields || (dataset.fields = []))[0] || {}).data || (ref$.data = [])).length || 0;
  ret = [dataset.fields.map(function(it){
    return it.name;
  }).join(",")];
  for (i$ = 0; i$ < rowlen; ++i$) {
    i = i$;
    ret.push((fn$()).join(","));
  }
  return postMessage({
    type: "parse.revert",
    data: ret.join('\n')
  });
  function fn$(){
    var i$, to$, results$ = [];
    for (i$ = 0, to$ = collen; i$ < to$; ++i$) {
      j = i$;
      v = dataset.fields[j].data[i] + "";
      if (v.indexOf(',')) {
        v = "\"" + v + "\"";
      }
      results$.push(v);
    }
    return results$;
  }
};
onmessage = function(arg$){
  var payload;
  payload = arg$.data;
  if (typeof payload !== 'object') {
    return;
  }
  switch (payload.type) {
  case "parse.revert":
    return revert(payload.data);
  }
};