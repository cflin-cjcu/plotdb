// Generated by LiveScript 1.3.1
var x$;
x$ = angular.module('plotDB');
x$.service('teamService', ['$rootScope', '$http', 'plConfig', 'IOService', 'baseService'].concat(function($rootScope, $http, plConfig, IOService, baseService){
  var service, object, teamService;
  service = {};
  object = function(){
    import$(this, {
      name: 'untitled',
      description: null,
      owner: null,
      createdtime: new Date(),
      modifiedtime: new Date(),
      _type: {
        location: 'server',
        name: 'team'
      },
      permission: {
        'switch': [],
        value: []
      }
    });
    return this;
  };
  teamService = baseService.derive('team', service, object);
  return teamService;
}));
x$.controller('team', ['$scope', '$http', 'plNotify'].concat(function($scope, $http, plNotify){
  $scope.removeMember = function(tid, mid){
    return $http({
      url: "/d/team/" + tid + "/member/" + mid,
      method: 'DELETE'
    }).success(function(d){
      return plNotify.send('success', "members removed");
    }).error(function(d){
      return plNotify.send('error', "failed to remove member, try again later?");
    });
  };
  return $scope.addMembers = function(tid){
    var newMembers;
    newMembers = $('#search-user').val();
    return $http({
      url: "/d/team/" + tid + "/member/",
      method: 'POST',
      data: newMembers
    }).success(function(d){
      return plNotify.send('success', "members added");
    }).error(function(d){
      return plNotify.send('error', "failed to add members. try again later?");
    });
  };
}));
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}