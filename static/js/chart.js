var x$;x$=angular.module("plotDB"),x$.controller("chartEditor",["$scope"].concat(function(e){return e.chart={init:function(){return e.chart.code.content='module.exports = plotdb.chart.create({\n  name: "New Chart",\n  title: "New Chart",\n  desc: "No Description",\n  author: "Your Name",\n  mapping: {\n    value: { type: [plotdb.Number], require: true },\n    name: { type: [], require: false }\n  },\n  config: {\n    padding: { type: [plotdb.Number], default: 10 },\n    margin: { type: [plotdb.Number], default: 10 }\n  },\n  bind: function(root, data, config) {\n  },\n  resize: function(root, data, config) {\n  },\n  render: function(root, data, config) {\n    root.style.background = \'red\';\n    root.style.height = \'100px\';\n  }\n});'},setdim:function(e,n,t){return console.log(e,n),t.fields=[e]},render:function(){var n,t,r,o;return r={},r.doc=(t=e.chart).doc,r.style=t.style,r.code=t.code,n=r,o=document.getElementById("visualizer"),o.contentWindow.postMessage(n,"http://localhost/")},doc:{option:{mode:"xml",lineWrapping:!0,lineNumbers:!0},content:""},style:{option:{mode:"css",lineWrapping:!0,lineNumbers:!0},content:""},code:{option:{mode:"javascript",lineWrapping:!0,lineNumbers:!0},content:"function() {}"}},e.chart.init(),setTimeout(function(){return e.chart.render()},1e3),e.$watch("chart.code.content",function(n){function t(e){return e.replace(/plotdb\./,"").trim()}function r(e){return e}var o,i,a,c,s,u,l,p,d,m,f,h=[];for(o=n.split("\n"),i=0,a=[],c=0,s=o.length;s>c&&(u=o[c],!/^\s*}\s*,\s*$/.exec(u));++c)1===i&&a.push(u),/^\s*mapping\s*:\s*{\s*$/.exec(u)&&(i=1);for(e.chart.dimensions=[],c=0,s=a.length;s>c;++c)l=a[c],p=/(\S+)\s*:\s*{/.exec(l),p&&(d=p[1],p=/type\s*:\s*\[([^\]]*)\]/.exec(l),p&&(m=p[1].split(",").map(t).filter(r),p=/require: (true|false)/.exec(l),p&&(f=p[1],h.push(e.chart.dimensions.push({name:d,type:m,require:f})))));return h}),e.data=[{name:"Population2015.csv",size:"456KB",rows:"72",color:"#f99",key:1,fields:[{name:"population",type:"Number",file:1},{name:"date",type:"Date",file:1}]},{name:"Agriculture.csv",size:"73KB",rows:"15",color:"#9f9",key:2,fields:[{name:"ratio",type:"Percent",file:2},{name:"area",type:"Number",file:2},{name:"revenue",type:"Number",file:2}]}]}));